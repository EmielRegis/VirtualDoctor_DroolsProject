package com.sample;

global QuestionCommunicator questionCommunicator;

import org.drools.marshalling.impl.ProtobufMessages

rule "Init"
    when
    then
        System.out.println("Initializiing...");
        boolean age = questionCommunicator.createQuestion("Are you over 18 sweetheart?");
		String sex =  questionCommunicator.createSelectOptionQuestion("What's your gender?", new String[] {"male", "female", "devil knows"});
		DiagnosisMaster diagnosis = new DiagnosisMaster(sex, age); 
        String[] compoundAnswer = questionCommunicator.createSelectOptionsQuestion("Co Cię boli, czy aż tak to cię boli, czy Rychu peja ma dziś szansę uczciwie zarobić?", new String[] {"klatka", "brzuch"});
		for(String ans : compoundAnswer) {
			if( ans == "klatka") diagnosis.setChestPain(true);
			if(ans == "brzuch") diagnosis.setStomachPain(true);
			//if (ans == "brzuch")
		}
		insert(diagnosis);
end

rule "Chest"
    when d : DiagnosisMaster(chestPain)
    then
        d.setStuffiness(questionCommunicator.createQuestion("Czy masz uczucie duszności?"));
        System.out.println(d.isStuffiness());
        update(d);
    end
 
rule "Stomach"
	when d : DiagnosisMaster(stomachPain)
	then
		System.out.println("boli mnie brzuch");
end

rule "Stuffiness"
	when d : DiagnosisMaster(stuffiness)
	then
		System.out.println("jedz suchary");
end

